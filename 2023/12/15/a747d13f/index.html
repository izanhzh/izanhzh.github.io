<!DOCTYPE html><html class=appearance-dark lang=zh-CN><head><meta charset=UTF-8><title>Jenkins基于角色的授权策略</title><meta name=description content="Keep Learning"><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no,initial-scale=1"><link rel=icon href=/images/favicon.ico><link rel=stylesheet href=/style/common/bulma.css><link rel=stylesheet href=/style/base.css><link rel=stylesheet href=/style/common/helper.css><link rel=stylesheet href=/style/prism.css><link rel=stylesheet href=/style/prism-plugin.css><link rel=stylesheet href=/style/code-unfold.css><link rel=stylesheet href=/lib/font-awesome/css/font-awesome.min.css><script src=/js/common.js></script><script src=/js/prism.js></script><script src=/js/fetch.min.js></script><script src=/js/figlet.js></script><link rel=stylesheet href=/style/post.css><link rel=stylesheet href=/style/common/jquery.fancybox.min.css><meta name=description content="
Jenkins的授权策略有非常多种，我习惯用基于角色的授权策略，这里记录下配置的一些细节。

我使用的Jenkins版本：2.375.2

安装插件进入插件安装页面：Dashboard → Manage Jenkins → Plugin Manager → Available plugins，搜索 “Role-based”，选择 Role-based Authorization Strategy 插件，点击 Download now and install after restart 进行安装。

配置授权策略进入配置全局安全页面：Dashboard → Manage Jenkins → Configure Global Security, 修改 Authorization 配置，选择 Role-Base.."><meta name=generator content="Hexo 7.0.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel=alternate href=/atom.xml title="Amos's blog" type=application/atom+xml></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href=/ >Amos's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class=is-full-height id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Jenkins基于角色的授权策略</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class=is-flex-shrink-0><h3 class=is-inline-block><a href=/ >首页</a></h3><h3 class=is-inline-block><a href=/about>关于</a></h3><h3 class=is-inline-block><a href=/archives>归档</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class=is-inline-block><a href=/ >首页</a></h3><h3 class=is-inline-block><a href=/about>关于</a></h3><h3 class=is-inline-block><a href=/archives>归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6><span class=toc-text>安装插件</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%85%8D%E7%BD%AE%E6%8E%88%E6%9D%83%E7%AD%96%E7%95%A5><span class=toc-text>配置授权策略</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%88%9B%E5%BB%BA%E8%A7%92%E8%89%B2><span class=toc-text>创建角色</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%88%9B%E5%BB%BA%E5%85%A8%E5%B1%80%E8%A7%92%E8%89%B2><span class=toc-text>创建全局角色</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E8%A7%92%E8%89%B2><span class=toc-text>创建项目角色</span></a></li></ol></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2%E7%BB%99%E7%94%A8%E6%88%B7><span class=toc-text>分配角色给用户</span></a></li></ol></div><div class="column is-9"><header class=my-4><a href=/tags/%E9%9A%8F%E7%AC%94><i class="tag post-item-tag">随笔</i></a><a href=/tags/jenkins><i class="tag post-item-tag">jenkins</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id=postTitle>Jenkins基于角色的授权策略</h1><time class=has-text-grey datetime=2023-12-15T00:57:56.000Z>2023-12-15</time><article class="mt-2 post-content"><p><img src=/images/jenkins.jpg alt=$cover></p><p>Jenkins的授权策略有非常多种，我习惯用基于角色的授权策略，这里记录下配置的一些细节。</p><blockquote><p>我使用的Jenkins版本：2.375.2</p></blockquote><h3 id=安装插件><a href=#安装插件 class=headerlink title=安装插件></a>安装插件</h3><p>进入插件安装页面：<code>Dashboard → Manage Jenkins → Plugin Manager → Available plugins</code>，搜索 “Role-based”，选择 <code>Role-based Authorization Strategy</code> 插件，点击 <code>Download now and install after restart</code> 进行安装。</p><p><img src=/images/posts/a747d13f/install_plugin.png alt=安装插件></p><h3 id=配置授权策略><a href=#配置授权策略 class=headerlink title=配置授权策略></a>配置授权策略</h3><p>进入配置全局安全页面：<code>Dashboard → Manage Jenkins → Configure Global Security</code>, 修改 <code>Authorization</code> 配置，选择 <code>Role-Base Strategy</code>，点击 <code>Apply</code> 按钮应用配置。</p><p><img src=/images/posts/a747d13f/configure_global_security.png alt=配置授权策略></p><h3 id=创建角色><a href=#创建角色 class=headerlink title=创建角色></a>创建角色</h3><p>插件提供了三种类型的角色。</p><table><thead><tr><th>类型</th><th>备注</th></tr></thead><tbody><tr><td>全局角色（Global roles）</td><td>适用于管理员，可以跨越全部项目进行授权</td></tr><tr><td>项目角色（Item roles）</td><td>适用于给用户按项目分配权限的场景</td></tr><tr><td>节点角色（Agent roles）</td><td>适用于集群管理，对节点进行分配权限（<em>我还没有实践过，查资料得到的结论</em>）</td></tr></tbody></table><blockquote><p>全局角色的权限会覆盖项目角色的权限，如果一个用户给了全局权限，即使项目权限没有给，该用户也会拥有该权限。并且由于全局角色是跨越全部项目的，如果设置不得当，会让用户不受项目角色控制，可以操作全部项目。</p></blockquote><h4 id=创建全局角色><a href=#创建全局角色 class=headerlink title=创建全局角色></a>创建全局角色</h4><p>进入配置页面：<code>Dashboard → Manage Jenkins → Manage and Assign Roles → Manage Roles</code>，找到 <code>Global roles</code> 配置。</p><p><img src=/images/posts/a747d13f/manage_global_roles_1.png alt=配置全局角色步骤1></p><p><img src=/images/posts/a747d13f/manage_global_roles_2.png alt=配置全局角色步骤2></p><blockquote><p>对于管理员，建议直接勾选 <code>Overall | Administer</code></p><p>对于一般的用户，希望按项目管理权限是，建议只勾选 <code>Overall | Read</code> ，其他的都不要勾选，如果不勾选 <code>Overall | Read</code>，用户登录后会显示空白页面，啥操作都做不了</p></blockquote><h4 id=创建项目角色><a href=#创建项目角色 class=headerlink title=创建项目角色></a>创建项目角色</h4><p>进入配置页面：<code>Dashboard → Manage Jenkins → Manage and Assign Roles → Manage Roles</code>，找到 <code>Item roles</code> 配置。</p><p><img src=/images/posts/a747d13f/manage_item_roles_1.png alt=配置项目角色步骤1></p><p><img src=/images/posts/a747d13f/manage_item_roles_2.png alt=配置项目角色步骤2></p><h3 id=分配角色给用户><a href=#分配角色给用户 class=headerlink title=分配角色给用户></a>分配角色给用户</h3><p>进入配置页面：<code>Dashboard → Manage Jenkins → Manage and Assign Roles → Assign Roles</code>。</p><p><img src=/images/posts/a747d13f/assign_roles.png alt=分配角色给用户></p><blockquote><p>不能只给用户分配项目角色，必须要分配一个全局角色，全局角色包含 <code>Overall | Read</code> 权限，否则用户登录后会显示空白页面，啥操作都做不了。</p></blockquote></article><footer class=mt-3><div class=copyright-container><span class=has-text-grey>作者: Amos</span><br><span class=has-text-grey>出处: </span><a class=has-text-grey href=https://izanhzh.github.io/2023/12/15/a747d13f/ title=https://izanhzh.github.io/2023/12/15/a747d13f/ >https://izanhzh.github.io/2023/12/15/a747d13f/</a><br><span class=has-text-grey>邮箱: hzh990094740@outlook.com</span><br><span class="has-text-grey copyright-statement">本文版权归作者所有，商业转载请联系作者获得授权，非商业转载请注明出处。</span></div></footer><section class="jump-container is-flex is-justify-content-space-between my-6"><em></em><a class="button is-default" href=/2023/12/14/b6721e6e/ title=OpenIddict学习实践小结><span class=has-text-weight-semibold>下一页: OpenIddict学习实践小结</span><i class="iconfont icon-claudia-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo=izanhzh/izanhzh.github.io src=https://utteranc.es/client.js issue-term=pathname theme=github-dark></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class=sns-container><a title=github target=_blank rel="noopener nofollow" href=//github.com/izanhzh><i class="iconfont icon-claudia-github"></i></a></section><p><span>Copyright ©</span><span> Amos 2023</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target=_blank rel=noopener href=//github.com/haojen>Theme by Haojen&nbsp;</a></p><div style=margin-top:2px><a class=github-button title=github-button target=_blank rel=noopener href=https://github.com/haojen/hexo-theme-Claudia data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count=true></a></div></div><div><span></span></div></footer><script async defer=defer src=https://buttons.github.io/buttons.js></script><script src=/js/jquery-3.6.1.min.js></script><script src=/js/code-unfold.js></script><script>codeUnfold("收起代码","展开代码"),figlet.defaults({fontPath:"/fonts"}),figlet.preloadFonts(["ANSI Shadow"]),figlet("Super\r\nDid you\r\ndiscover new world\r\n^_^",{font:"ANSI Shadow",horizontalLayout:"full",verticalLayout:"full"},function(o,l){o||console.log(l)})</script><script src=/js/jquery-fancybox.min.js></script><script src=/js/img_zoom.js></script><script src=/js/post.js></script></body></html>