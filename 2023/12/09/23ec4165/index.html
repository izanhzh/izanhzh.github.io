<!DOCTYPE html><html class=appearance-dark lang=zh-CN><head><meta charset=UTF-8><title>对.net core认证授权的一些理解</title><meta name=description content="Keep Learning"><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no,initial-scale=1"><link rel=icon href=/images/favicon.ico><link rel=stylesheet href=/style/common/bulma.css><link rel=stylesheet href=/style/base.css><link rel=stylesheet href=/style/common/helper.css><link rel=stylesheet href=/style/prism.css><link rel=stylesheet href=/style/prism-plugin.css><link rel=stylesheet href=/style/code-unfold.css><link rel=stylesheet href=/lib/font-awesome/css/font-awesome.min.css><script src=/js/common.js></script><script src=/js/prism.js></script><script src=/js/fetch.min.js></script><script src=/js/figlet.js></script><link rel=stylesheet href=/style/post.css><link rel=stylesheet href=/style/common/jquery.fancybox.min.css><meta name=description content="
认证（Authentication）和授权（Authorization）是两个不同的动作

认证主要判断请求是由谁发出的，确认请求用户的信息（Claims，类似身份证信息的概念）
授权是在认证的基础上，根据认证获取到的用户的信息，判断用户是否有其请求资源的操作权限

认证
services.AddAuthentication(), app.UseAuthentication()配置使用认证中间件
添加认证中间件时，可以设置多种不同的认证方案(Scheme)
常见的一些认证方案&amp;amp;自定义
CookieAuthenticationDefaults.AuthenticationScheme   services.AddAuthentication(CookieAuthenticationDefaults..."><meta name=generator content="Hexo 7.0.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel=alternate href=/atom.xml title="Amos's blog" type=application/atom+xml></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href=/ >Amos's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class=is-full-height id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">对.net core认证授权的一些理解</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class=is-flex-shrink-0><h3 class=is-inline-block><a href=/ >首页</a></h3><h3 class=is-inline-block><a href=/about>关于</a></h3><h3 class=is-inline-block><a href=/archives>归档</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class=is-inline-block><a href=/ >首页</a></h3><h3 class=is-inline-block><a href=/about>关于</a></h3><h3 class=is-inline-block><a href=/archives>归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%AE%A4%E8%AF%81><span class=toc-text>认证</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%8E%88%E6%9D%83><span class=toc-text>授权</span></a></li></ol></div><div class="column is-9"><header class=my-4><a href=/tags/dotnet><i class="tag post-item-tag">dotnet</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id=postTitle>对.net core认证授权的一些理解</h1><time class=has-text-grey datetime=2023-12-09T08:32:32.000Z>2023-12-09</time><article class="mt-2 post-content"><p><img src=/images/dotnetcore.jpg alt=$cover></p><p>认证（Authentication）和授权（Authorization）是两个不同的动作</p><ul><li>认证主要判断请求是由谁发出的，确认请求用户的信息（<a target=_blank rel=noopener href=https://www.cnblogs.com/AJun816/p/16152568.html#claims%E8%AF%81%E4%BB%B6%E5%8D%95%E5%85%83>Claims</a>，类似身份证信息的概念）</li><li>授权是在认证的基础上，根据认证获取到的用户的信息，判断用户是否有其请求资源的操作权限</li></ul><h2 id=认证><a href=#认证 class=headerlink title=认证></a>认证</h2><ol><li><code>services.AddAuthentication()</code>, <code>app.UseAuthentication()</code>配置使用认证中间件</li><li>添加认证中间件时，可以设置多种不同的认证方案(Scheme)</li><li>常见的一些认证方案&amp;自定义<ul><li>CookieAuthenticationDefaults.AuthenticationScheme<pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp>services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span>CookieAuthenticationDefaults<span class="token punctuation">.</span>AuthenticationScheme<span class="token punctuation">)</span><span aria-hidden=true class=line-numbers-rows><span></span></span></code></pre></li><li>JwtBearerDefaults.AuthenticationScheme<pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp>services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span>JwtBearerDefaults<span class="token punctuation">.</span>AuthenticationScheme<span class="token punctuation">)</span><span aria-hidden=true class=line-numbers-rows><span></span></span></code></pre></li><li>IdentityConstants.ApplicationScheme<pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp>services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddIdentity</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IdentityUser<span class="token punctuation">,</span> IdentityRole<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden=true class=line-numbers-rows><span></span></span></code></pre><a target=_blank rel=noopener href=https://github.com/dotnet/aspnetcore/blob/main/src/Identity/Core/src/IdentityServiceCollectionExtensions.cs>AddIdentity里面做了一个如下的操作</a><pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp>services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    options<span class="token punctuation">.</span>DefaultAuthenticateScheme <span class="token operator">=</span> IdentityConstants<span class="token punctuation">.</span>ApplicationScheme<span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>DefaultChallengeScheme <span class="token operator">=</span> IdentityConstants<span class="token punctuation">.</span>ApplicationScheme<span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>DefaultSignInScheme <span class="token operator">=</span> IdentityConstants<span class="token punctuation">.</span>ExternalScheme<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><a target=_blank rel=noopener href=https://zhuanlan.zhihu.com/p/636433010>自定义认证方案</a><pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp>services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span><span class="token string">"CustomAuth"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//或者</span>
services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    options<span class="token punctuation">.</span>DefaultAuthenticateScheme <span class="token operator">=</span> <span class="token string">"CustomAuth"</span><span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>DefaultChallengeScheme <span class="token operator">=</span> <span class="token string">"CustomAuth"</span><span class="token punctuation">;</span><span class="token comment">//也可以指定成其他的，不一定要和DefaultAuthenticateScheme一样</span>
    options<span class="token punctuation">.</span>DefaultSignInScheme <span class="token operator">=</span> <span class="token string">"CustomAuth"</span><span class="token punctuation">;</span><span class="token comment">//也可以指定成其他的，不一定要和DefaultAuthenticateScheme一样</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li>只设置认证方案是不够的，还需要对认证方案指定验证逻辑（AuthenticationHandler）</li><li>常见的一些认证方案指定验证逻辑<ul><li>CookieAuthenticationDefaults.AuthenticationScheme -&gt; CookieAuthenticationHandler<pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp><span class="token comment">//https://github.com/dotnet/aspnetcore/blob/main/src/Security/Authentication/Cookies/src/CookieExtensions.cs</span>
services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span>CookieAuthenticationDefaults<span class="token punctuation">.</span>AuthenticationScheme<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddCookie</span><span class="token punctuation">(</span>options<span class="token operator">=&gt;</span><span class="token punctuation">{</span>xxx<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span></span></code></pre></li><li>JwtBearerDefaults.AuthenticationScheme -&gt; JwtBearerHandler<pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp><span class="token comment">//https://github.com/dotnet/aspnetcore/blob/main/src/Security/Authentication/JwtBearer/src/JwtBearerExtensions.cs</span>
services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span>JwtBearerDefaults<span class="token punctuation">.</span>AuthenticationScheme<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddJwtBearer</span><span class="token punctuation">(</span>options<span class="token operator">=&gt;</span><span class="token punctuation">{</span>xxx<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span></span></code></pre></li><li>IdentityConstants.ApplicationScheme -&gt; CookieAuthenticationHandler (阅读理解services.AddIdentity源码)<pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp>services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    options<span class="token punctuation">.</span>DefaultAuthenticateScheme <span class="token operator">=</span> IdentityConstants<span class="token punctuation">.</span>ApplicationScheme<span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>DefaultChallengeScheme <span class="token operator">=</span> IdentityConstants<span class="token punctuation">.</span>ApplicationScheme<span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>DefaultSignInScheme <span class="token operator">=</span> IdentityConstants<span class="token punctuation">.</span>ExternalScheme<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//对IdentityConstants.ApplicationScheme认证方案指定CookieAuthenticationHandler</span>
<span class="token punctuation">.</span><span class="token function">AddCookie</span><span class="token punctuation">(</span>IdentityConstants<span class="token punctuation">.</span>ApplicationScheme<span class="token punctuation">,</span> o <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    o<span class="token punctuation">.</span>LoginPath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PathString</span><span class="token punctuation">(</span><span class="token string">"/Account/Login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>Events <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CookieAuthenticationEvents</span>
    <span class="token punctuation">{</span>
        OnValidatePrincipal <span class="token operator">=</span> SecurityStampValidator<span class="token punctuation">.</span>ValidatePrincipalAsync
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//对IdentityConstants.ExternalScheme认证方案指定CookieAuthenticationHandler</span>
<span class="token punctuation">.</span><span class="token function">AddCookie</span><span class="token punctuation">(</span>IdentityConstants<span class="token punctuation">.</span>ExternalScheme<span class="token punctuation">,</span> o <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    o<span class="token punctuation">.</span>Cookie<span class="token punctuation">.</span>Name <span class="token operator">=</span> IdentityConstants<span class="token punctuation">.</span>ExternalScheme<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>ExpireTimeSpan <span class="token operator">=</span> TimeSpan<span class="token punctuation">.</span><span class="token function">FromMinutes</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//对IdentityConstants.TwoFactorRememberMeScheme认证方案指定CookieAuthenticationHandler</span>
<span class="token punctuation">.</span><span class="token function">AddCookie</span><span class="token punctuation">(</span>IdentityConstants<span class="token punctuation">.</span>TwoFactorRememberMeScheme<span class="token punctuation">,</span> o <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    o<span class="token punctuation">.</span>Cookie<span class="token punctuation">.</span>Name <span class="token operator">=</span> IdentityConstants<span class="token punctuation">.</span>TwoFactorRememberMeScheme<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>Events <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CookieAuthenticationEvents</span>
    <span class="token punctuation">{</span>
        OnValidatePrincipal <span class="token operator">=</span> SecurityStampValidator<span class="token punctuation">.</span>ValidateAsync<span class="token operator">&lt;</span>ITwoFactorSecurityStampValidator<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//对IdentityConstants.TwoFactorUserIdScheme认证方案指定CookieAuthenticationHandler</span>
<span class="token punctuation">.</span><span class="token function">AddCookie</span><span class="token punctuation">(</span>IdentityConstants<span class="token punctuation">.</span>TwoFactorUserIdScheme<span class="token punctuation">,</span> o <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    o<span class="token punctuation">.</span>Cookie<span class="token punctuation">.</span>Name <span class="token operator">=</span> IdentityConstants<span class="token punctuation">.</span>TwoFactorUserIdScheme<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>Events <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CookieAuthenticationEvents</span>
    <span class="token punctuation">{</span>
        OnRedirectToReturnUrl <span class="token operator">=</span> _ <span class="token operator">=&gt;</span> Task<span class="token punctuation">.</span>CompletedTask
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>ExpireTimeSpan <span class="token operator">=</span> TimeSpan<span class="token punctuation">.</span><span class="token function">FromMinutes</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>自定义认证方案<ul><li>定义一个类继承AuthenticationHandler，重写HandleAuthenticateAsync方法</li><li>定义一个类继承AuthenticationSchemeOptions</li><li>定义一个AuthenticationBuilder的扩展方法，例如：<pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">AuthenticationBuilder</span> <span class="token function">AddCustomAuth</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">AuthenticationBuilder</span> builder<span class="token punctuation">,</span> <span class="token class-name">Action<span class="token punctuation">&lt;</span>CustomAuthenticationOptions<span class="token punctuation">&gt;</span></span> configureOptions<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScheme</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CustomAuthenticationOptions<span class="token punctuation">,</span> CustomAuthenticationHandler<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"CustomAuth"</span><span class="token punctuation">,</span> configureOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span></span></code></pre></li><li>指定验证逻辑<pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp>services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span><span class="token string">"CustomAuth"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddCustomAuth</span><span class="token punctuation">(</span>options<span class="token operator">=&gt;</span><span class="token punctuation">{</span>xxx<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden=true class=line-numbers-rows><span></span></span></code></pre></li></ul></li></ul></li><li>认证方案和验证逻辑是可以任意组合绑定的，例如：<code>CookieAuthenticationDefaults.AuthenticationScheme</code>、<code>IdentityConstants.ApplicationScheme</code>，都会指定用<code>CookieAuthenticationHandler</code></li></ol><h2 id=授权><a href=#授权 class=headerlink title=授权></a>授权</h2><ol><li>要在<code>app.UseAuthentication()</code>代码之后添加<code>app.UseAuthorization()</code>使用授权中间件</li><li>使用<code>AuthorizeAttribute</code>特性标记控制器类或方法需要的权限<pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authorize</span></span><span class="token punctuation">]</span><span class="token comment">//不指定认证方案，会按默认的认证方案处理</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authorize</span><span class="token attribute-arguments"><span class="token punctuation">(</span>AuthenticationSchemes<span class="token operator">=</span><span class="token string">"CustomAuth"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token comment">//指定用特定的认证方案</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authorize</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"AtLeast21"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token comment">//基于Policy授权</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authorize</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Policy<span class="token operator">=</span><span class="token string">"AtLeast21"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token comment">//基于Policy授权</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authorize</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Roles<span class="token operator">=</span><span class="token string">"Admin"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token comment">//基于角色授权</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>直接对终结点设置需要的权限<pre class="line-numbers language-csharp" data-language=csharp><code class=language-csharp>app<span class="token punctuation">.</span><span class="token function">UseEndpoints</span><span class="token punctuation">(</span>endpoints <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> pipeline <span class="token operator">=</span> endpoints<span class="token punctuation">.</span><span class="token function">CreateApplicationBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> swaggerAuthAttr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthorizeAttribute</span><span class="token punctuation">(</span><span class="token string">"swagger-permission"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    endpoints<span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span><span class="token string">"/swagger/{documentName}/swagger.json"</span><span class="token punctuation">,</span> pipeline<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RequireAuthorization</span><span class="token punctuation">(</span>swaggerAuthAttr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    endpoints<span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span><span class="token string">"/swagger/index.html"</span><span class="token punctuation">,</span> pipeline<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RequireAuthorization</span><span class="token punctuation">(</span>swaggerAuthAttr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    endpoints<span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span><span class="token string">"/myswagger/{documentName}/swagger.json"</span><span class="token punctuation">,</span> pipeline<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RequireAuthorization</span><span class="token punctuation">(</span>swaggerAuthAttr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    endpoints<span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span><span class="token string">"/myswagger/index.html"</span><span class="token punctuation">,</span> pipeline<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RequireAuthorization</span><span class="token punctuation">(</span>swaggerAuthAttr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><a target=_blank rel=noopener href="https://learn.microsoft.com/zh-cn/aspnet/core/security/authorization/policies?view=aspnetcore-8.0">基于Policy授权</a></li><li><a target=_blank rel=noopener href="https://learn.microsoft.com/zh-cn/aspnet/core/security/authorization/roles?view=aspnetcore-8.0">基于角色授权</a></li></ol></article><footer class=mt-3><div class=copyright-container><span class=has-text-grey>作者: Amos</span><br><span class=has-text-grey>出处: </span><a class=has-text-grey href=https://izanhzh.github.io/2023/12/09/23ec4165/ title=https://izanhzh.github.io/2023/12/09/23ec4165/ >https://izanhzh.github.io/2023/12/09/23ec4165/</a><br><span class=has-text-grey>邮箱: hzh990094740@outlook.com</span><br><span class="has-text-grey copyright-statement">本文版权归作者所有，商业转载请联系作者获得授权，非商业转载请注明出处。</span></div></footer><section class="jump-container is-flex is-justify-content-space-between my-6"><a class="button is-default" href=/2023/12/11/c44ec6ab/ title=Git修改已提交记录的作者信息><i class="iconfont icon-claudia-prev mr-2 has-text-grey"></i><span class=has-text-weight-semibold>上一页: Git修改已提交记录的作者信息</span></a><a class="button is-default" href=/2023/12/09/4a17b156/ title="Hello World"><span class=has-text-weight-semibold>下一页: Hello World</span><i class="iconfont icon-claudia-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo=izanhzh/izanhzh.github.io src=https://utteranc.es/client.js issue-term=pathname theme=github-dark></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class=sns-container><a title=github target=_blank rel="noopener nofollow" href=//github.com/izanhzh><i class="iconfont icon-claudia-github"></i></a></section><p><span>Copyright ©</span><span> Amos 2023</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target=_blank rel=noopener href=//github.com/haojen>Theme by Haojen&nbsp;</a></p><div style=margin-top:2px><a class=github-button title=github-button target=_blank rel=noopener href=https://github.com/haojen/hexo-theme-Claudia data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count=true></a></div></div><div><span></span></div></footer><script async defer=defer src=https://buttons.github.io/buttons.js></script><script src=/js/jquery-3.6.1.min.js></script><script src=/js/code-unfold.js></script><script>codeUnfold("收起代码","展开代码"),figlet.defaults({fontPath:"/fonts"}),figlet.preloadFonts(["ANSI Shadow"]),figlet("Super\r\nDid you\r\ndiscover new world\r\n^_^",{font:"ANSI Shadow",horizontalLayout:"full",verticalLayout:"full"},function(o,l){o||console.log(l)})</script><script src=/js/jquery-fancybox.min.js></script><script src=/js/img_zoom.js></script><script src=/js/post.js></script></body></html>