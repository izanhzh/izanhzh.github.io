var $posts={scroller:function(){function s(){return this.callbacks=[],this}return s.prototype.bindScrollEvent=function(){var s=this;window.addEventListener("scroll",(function(o){var t=!1,e=window.pageYOffset;t||(t=!0,setTimeout((function(){var i={event:o,beforeOffsetY:e};s.callbacks.forEach((function(s){s(i)})),t=!1}),150))}))},s},showTopic:function(s){var o=document.getElementById("postTopic"),t=document.getElementById("postTitle"),e=t.getBoundingClientRect(),i=t.offsetTop+e.height;if(window.pageYOffset>i){var l=s&&s.beforeOffsetY,c=l-window.pageYOffset>0;o.classList.remove("is-hidden-topic-bar"),l-window.pageYOffset==0?(o.classList.remove("is-switch-post-title"),o.classList.remove("is-show-post-title"),o.classList.remove("immediately-show"),o.classList.contains("is-show-scrollToTop-tips")?(o.classList.remove("is-show-scrollToTop-tips"),o.classList.add("is-flash-scrollToTop-tips")):o.classList.add("immediately-show")):c?window.pageYOffset>2*window.innerHeight?(o.classList.remove("immediately-show"),o.classList.remove("is-show-post-title"),o.classList.remove("is-switch-post-title"),o.classList.remove("is-flash-scrollToTop-tips"),o.classList.add("is-show-scrollToTop-tips")):(o.classList.remove("immediately-show"),o.classList.remove("is-show-post-title"),o.classList.remove("is-show-scrollToTop-tips"),o.classList.remove("is-flash-scrollToTop-tips"),o.classList.add("is-switch-post-title")):l-window.pageYOffset!=0&&(o.classList.remove("immediately-show"),o.classList.remove("is-switch-post-title"),o.classList.remove("is-show-scrollToTop-tips"),o.classList.remove("is-flash-scrollToTop-tips"),o.classList.add("is-show-post-title"))}else o.classList.remove("is-flash-scrollToTop-tips"),o.classList.remove("is-show-scrollToTop-tips"),o.classList.remove("is-switch-post-title"),o.classList.remove("is-show-post-title"),o.classList.remove("immediately-show"),o.classList.add("is-hidden-topic-bar")},catalogueHighlight:function(){var s=document.querySelectorAll(".toc a");if(0===s.length)return!1;var o=document.querySelector(".toc");return function(){var t=[],e="is-active";s.forEach((function(s){if(s.href){var o=decodeURI(s.href).split("#")[1];t.push(document.getElementById(o))}}));for(var i=null,l=window.pageYOffset,c=0;c<t.length;c++){var a=t[c];if(!(a.offsetTop>l+30)){i?a.offsetTop+60>=i.offsetTop-60&&(i=a):i=a;var n=document.querySelector(".toc ."+e);n&&n.classList.remove(e);var r='.toc a[href="#'+encodeURI(i.id)+'"]',d=document.querySelector(r);d.classList.add(e);var m=o.getBoundingClientRect().height;d.offsetTop>=m-60?o.scrollTo({top:d.offsetTop+100-m}):o.scrollTo({top:0})}}}},smoothScrollToTop:function(){var s=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;s>1?(window.requestAnimationFrame($posts.smoothScrollToTop),scrollTo(0,Math.floor(.85*s))):scrollTo(0,0)},addValineComment(){var s=document.getElementById("vcomments");new Valine({el:"#vcomments",appId:s.dataset.comment_valine_id,appKey:s.dataset.comment_valine_key})},mounted:function(){var s=new(this.scroller()),o=this.catalogueHighlight();o&&s.callbacks.push(o),s.callbacks.push(this.showTopic),s.bindScrollEvent(),$claudia.fadeInImage(document.querySelectorAll(".post-content img")),document.getElementById("postTopic").addEventListener("click",this.smoothScrollToTop),window.Valine&&this.addValineComment()}};$posts.mounted();